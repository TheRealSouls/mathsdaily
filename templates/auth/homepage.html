{% extends "layouts/auth_layout.html" %}

{% block styles %}
    <link rel="stylesheet" href="../../static/css/homepage.css">
{% endblock %}

{% block content %}

    <!-- TODO: Add math animations-->
    <!-- TODO: Accessibility, ARIA on all websites.-->
    <!-- TODO: Add responsivity with the cards-->

    {% if messages %}
        <ul class="flash-container">
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <div id="greeting">
        <h1 id="hello">Hello, {{ data[0]["username"] }}!</h1>
        <h1 class="ready">Ready for today's challenge?</h1>
    </div>
    <div id="quote">
        <div class="icon">üß†</div>
        <div class="quote-text">"Pure mathematics is, in its way, the poetry of logical ideas."</div>
        <div class="quote-person">‚ÄîAlbert Einstein</div>
    </div>

    <div id="dashboard-grid">
        <div class="challenge-section">
            <h2 class="section-title">üéØ Today's Challenges</h2>
            <div class="challenge-cards">
            {% for challenge in challenges %}
                <a href="/challenge/{{ challenge.problem_id }}" data-difficulty="{{ challenge.difficulty }}">
                <div class="challenge-card {{ challenge.difficulty }}" data-difficulty="{{ challenge.difficulty }}">
                    <div class="challenge-header">
                        <div class="difficulty-badge {{ challenge.difficulty }}">
                            {% if challenge.difficulty == "trivial" %}‚ö™ Trivial
                            {% elif challenge.difficulty == "easy" %}üü¢ Easy
                            {% elif challenge.difficulty == "medium" %}üü° Medium
                            {% elif challenge.difficulty == "hard" %}üî¥ Hard
                            {% elif challenge.difficulty == "extreme" %}‚ö´ Extreme
                            {% endif %}
                        </div>
                        <div class="points-value">+{{ challenge.points }} pts</div>
                    </div>

                    <div class="challenge-title">{{ challenge.full_name }}</div>
                    <div class="challenge-description">
                        {{ challenge.content[:120] }}{% if challenge.content|length > 120 %}...{% endif %}
                    </div>
                    <div class="challenge-meta">
                        <div class="time-estimate">‚è±Ô∏è ~{{ challenge.duration }}</div>
                    </div>
                </div>
            </a>
        {% endfor %}
        </div>
        </div>
    </div>

    <div class="stats-card">
        <div class="stats-title">üèÜ Overall Stats</div>
        <div class="stat-item">
            <div class="stat-label">Total Score</div>
            <div class="stat-value">{{ data[0]["score"] }}</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">Problems Solved</div>
            <div class="stat-value">{{ data[0]["solved"] }}</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">Accuracy</div>
            <div class="stat-value">{{ "%.2f"|format(data[0]["accuracy"] * 100) }}%</div>
        </div>
    </div>

{% endblock %}
